{% extends 'project/base.html' %}
{% load staticfiles %}
{% load thumbnail %}
{# load web_tags #}
{% load i18n %}

{% block head %}
{{ wizard.form.media }}
{% endblock %}

{% block sub_title %}
    Choose a link
{% endblock sub_title %}

{% block sub_heading %}
  {% ifequal 'url_type' wizard.steps.current %}
    Choose the type of link
  {% endifequal %}
  {% ifequal 'l' wizard.steps.current %}
    Enter an External Link
  {% endifequal %}
  {% ifequal 'p' wizard.steps.current %}
    Choose a page from the site
  {% endifequal %}
  {% ifequal 'u' wizard.steps.current %}
    Upload a document for this link
  {% endifequal %}
  {% ifequal 'e' wizard.steps.current %}
    Choose a previously uploaded document
  {% endifequal %}
  {% ifequal 'm' wizard.steps.current %}
    Choose Membership Levels that have access to this document
  {% endifequal %}
  {% ifequal 'c' wizard.steps.current %}
    Choose Courses that have access to this document
  {% endifequal %}
{% endblock sub_heading %}

{% block content %}
  <div class="pure-g">
    <div class="pure-u-1">
       <form id="urlchoice" action="" method="post" {% if form.is_multipart %}enctype="multipart/form-data"{% endif %} class="pure-form pure-form-stacked">
        {% csrf_token %}
        {% if form.non_field_errors %}
          {{ form.non_field_errors }}
        {% endif %}
        <fieldset>
          {{ wizard.management_form }}
          {% if wizard.form.forms %}
            {{ wizard.form.management_form }}
            {% for form in wizard.form.forms %}


              {% if legend %}
                <legend>{{ legend }}</legend>
              {% endif %}
              {% for field in form.visible_fields %}
                <div class="pure-control-group">
                  {% if field.label %}
                    <label for='{{ field.id_for_label }}'>{{ field.label }}{% if field.help_text %} - {{ field.help_text }}{% endif %}:</label>
                  {% endif %}
                  {% if aligned %}
                    {{ field }}
                  {% endif %}
                  {% for error in field.errors %}
                    <span class="errorlist"><mark>{{ error }}</mark></span>
                  {% endfor %}
                  {% if not aligned %}
                    {{ field }}
                  {% endif %}
                </div>
              {% endfor %}


            {% endfor %}
          {% else %}
            {{ wizard.form }}
          {% endif %}

          <div class="pure-controls">
            <p>
              {% if wizard.steps.prev %}
                <button name="wizard_goto_step" type="submit" value="{{ wizard.steps.first }}" class="pure-button pure-button-primary">< {% trans "Back" %}</button>
              {% endif %}
              <button type="submit" value="{% trans "submit" %}" class="pure-button pure-button-primary">
                {% ifequal 1 wizard.steps.step1 %}
                  Next >
                {% else %}
                  Submit
                {% endifequal %}
              </button>
            </p>
          </div>
        </fieldset>
      </form>
    </div>
  </div>
{% endblock %}
